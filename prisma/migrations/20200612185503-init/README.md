# Migration `20200612185503-init`

This migration has been generated by enricoschaaf at 6/12/2020, 6:55:03 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Email" (
"from" text  NOT NULL ,"html" text  NOT NULL ,"id" text  NOT NULL ,"subject" text  NOT NULL ,"to" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Attachment" (
"emailId" text  NOT NULL ,"id" text  NOT NULL ,"name" text  NOT NULL ,"url" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE  INDEX "Email.from" ON "public"."Email"("from")

ALTER TABLE "public"."Attachment" ADD FOREIGN KEY ("emailId")REFERENCES "public"."Email"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200612185503-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,26 @@
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model Email {
+  id          String       @id @default(cuid())
+  from        String
+  to          String
+  subject     String
+  html        String
+  attachments Attachment[]
+  @@index([from])
+}
+
+model Attachment {
+  id      String @id @default(cuid())
+  name    String
+  url     String
+  Email   Email  @relation(fields: [emailId], references: [id])
+  emailId String
+}
```


